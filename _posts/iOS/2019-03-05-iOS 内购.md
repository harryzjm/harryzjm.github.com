---  
layout: post  
title: iOS å†…è´­ 
category: iOS  
tags: iOS  
keywords: iOS  
description: 
---  

__Posted by [IIronMan](https://www.jianshu.com/p/4f8a854ff427)__  

### ä¸€.æ€»è¯´å†…è´­çš„å†…å®¹

1.åè®®ã€ç¨åŠ¡å’Œé“¶è¡Œä¸šåŠ¡ ä¿¡æ¯å¡«å†™

2.å†…è´­å•†å“çš„æ·»åŠ 

3.æ·»åŠ æ²™ç›’æµ‹è¯•è´¦å·

4.å†…è´­ä»£ç çš„å…·ä½“å®ç°

5.å†…è´­çš„æ³¨æ„äº‹é¡¹

6.æ‰å•çš„å¤„ç†(è¿™ä¸ªæ˜¯ä¸€ä¸ªè›‹ç–¼çš„äº‹æƒ…)

7.å†…è´­å®¡æ ¸çš„æ³¨æ„äº‹é¡¹

8.èŠä¸€èŠå†…è´­ä¸Šçº¿ä¸è‹¹æœçš„æ²Ÿé€š

9.é’ˆå¯¹ä¸å¤§å®¶äº¤æµçš„ä¸€äº›é—®é¢˜åˆ—ä¸¾å¦‚ä¸‹

### äºŒ.åè®®ã€ç¨åŠ¡å’Œé“¶è¡Œä¸šåŠ¡ ä¿¡æ¯å¡«å†™

#### 2.1ã€åè®®ã€ç¨åŠ¡å’Œé“¶è¡Œä¸šåŠ¡ ä¿¡æ¯å¡«å†™ çš„å…¥å£

![](/assets/postAssets/2019/708266-20171227151345441-1879075383.jpg)

#### 2.2ã€é€‰æ‹©ç”³è¯·åˆåŒç±»å‹

è¿›å…¥åè®®ã€ç¨åŠ¡å’Œé“¶è¡Œä¸šåŠ¡é¡µé¢åï¼Œä¼šæœ‰3ç§åˆåŒç±»å‹ï¼Œå¦‚æœä½ ä¹‹å‰æ²¡æœ‰ä¸»åŠ¨ç”³è¯·è¿‡å»åˆåŒï¼Œé‚£ä¹ˆä¸€èˆ¬ä½ ç°åœ¨æ¿€æ´»çš„åˆåŒåªæœ‰iOS Free Applicationä¸€ç§ã€‚

é¡µé¢å†…å®¹åˆ†ä¸ºä¸¤å—ï¼š

    Request Contracts    ç”³è¯·åˆåŒ
    Contracts In Effect  å·²ç”Ÿæ•ˆåˆåŒ

åˆåŒç±»å‹åˆ†ä¸º3ç§ï¼š

    iOS Free Application  å…è´¹åº”ç”¨åˆåŒ
    iOS Paid Application  ä»˜è´¹åº”ç”¨åˆåŒ
    iAd App NetNetwork    å¹¿å‘ŠåˆåŒ

è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä¸»è¦è®²ä¸€ä¸‹ä»˜è´¹åº”ç”¨åˆåŒçš„ç”³è¯·æµç¨‹ã€‚

![](/assets/postAssets/2019/708266-20171227151510081-1694527049.jpg)

#### 2.3ã€ç”³è¯·iOS Paid ApplicationåˆåŒ(åè®®ã€ç¨åŠ¡å’Œé“¶è¡Œä¸šåŠ¡3ä¸ªéƒ½è¦å¡«å†™)

![](/assets/postAssets/2019/708266-20171227151732581-396305747.jpg)

2.4ã€Contact Info(å¡«å†™è”ç³»æ–¹å¼)

![](/assets/postAssets/2019/708266-20171227151812472-637276497.jpg)

å¦‚æœä½ æ²¡æœ‰æ·»åŠ è¿‡è”ç³»äººï¼Œä½ éœ€è¦é€šè¿‡Add New ContactæŒ‰é’®æ¥æ·»åŠ ä¸€ä¸ªæ–°çš„è”ç³»äººã€‚ç„¶åæŒ‡å®šè”ç³»äººçš„èŒåŠ¡ï¼Œ

èŒåŠ¡å¦‚ä¸‹ï¼š

    Senior Management  é«˜ç®¡
    Financial          è´¢åŠ¡
    Technical          æŠ€æœ¯æ”¯æŒ
    Legal              æ³•åŠ¡
    Marketing          å¸‚åœºæ¨å¹¿

å¦‚æœä½ æ˜¯ç‹¬ç«‹å¼€å‘è€…ï¼Œå¯ä»¥å…¨éƒ¨å¡«ä½ è‡ªå·±ä¸€ä¸ªäººã€‚

#### 2.5ã€å¡«å†™é“¶è¡Œä¿¡æ¯

![](/assets/postAssets/2019/708266-20171227151856160-1933027480.png)

é€‰æ‹©ä½ çš„é“¶è¡Œè´¦æˆ·ï¼Œå¦‚æœä½ æ²¡æœ‰ï¼Œç‚¹å‡»æ—è¾¹çš„Add Bank Accountæ·»åŠ ä¸€ä¸ªè´¦æˆ·ã€‚ä¸‹é¢æ˜¯æ·»åŠ ä¸€ä¸ªè´¦æˆ·çš„æµç¨‹ã€‚

##### 2.5.1ã€é€‰æ‹©é“¶è¡Œæ‰€åœ¨çš„å›½å®¶

![](/assets/postAssets/2019/708266-20171227151930800-167626290.png)

##### 2.5.2ã€å¡«å†™é“¶è¡Œæ ‡è¯†**CNAPS Code**

å¦‚æœä½ ä¸çŸ¥é“CNAPS Codeæ˜¯å¤šå°‘ï¼Œå¯ä»¥**ç™¾åº¦**æœCNAPS Codeæ¥æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ—¶ä¼šæ ¹æ®3ä¸ªå…³é”®ä¿¡æ¯æ¥æŸ¥è¯¢ï¼Œå¦‚ä¸‹ï¼š

    Bank Name    é“¶è¡Œçš„è‹±æ–‡åç§°(ä¸èƒ½æ˜¯æ‹¼éŸ³)
    City         é“¶è¡Œæ‰€åœ¨çš„åŸå¸‚è‹±æ–‡åç§°(ä¸­å›½çš„åŸå¸‚ç”¨æ‹¼éŸ³)
    Postal Code  é‚®ç¼–

ç„¶ååœ¨ä¸‹é¢å°±ä¼šå‡ºæ¥å¤‡é€‰çš„é“¶è¡Œï¼Œé€‰æ‹©æ­£ç¡®çš„é“¶è¡Œåï¼Œç‚¹å‡»**next**ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥ã€‚

![](/assets/postAssets/2019/708266-20171227152002535-655014147.jpg)

![](/assets/postAssets/2019/708266-20171227152044988-1615721161.jpg)

2.5.3ã€ç¡®è®¤é“¶è¡Œä¿¡æ¯

![](/assets/postAssets/2019/708266-20171227152112097-567573047.png)

##### 2.5.4ã€å¡«å†™é“¶è¡Œè´¦å·ä¿¡æ¯

    Bank Account Number           é“¶è¡Œè´¦å·
    Confirm Bank Account Number   å†æ¬¡è¾“å…¥é“¶è¡Œè´¦å·
    Account Holder Name           æŒå¡äººå§“åï¼Œä¸­æ–‡åç”¨æ‹¼å†™ï¼Œååœ¨å‰ï¼Œå§“åœ¨å
    Bank Account Currency         è´§å¸ç±»å‹ï¼Œä¸€èˆ¬å›½å†…çš„å¼€å‘è€…é€‰æ‹©CNY

![](/assets/postAssets/2019/708266-20171227152141675-962694145.jpg)

##### 2.5.5ã€ç¡®è®¤æ‰€æœ‰ä¿¡æ¯

![](/assets/postAssets/2019/708266-20171227152303081-1363278951.jpg)

#### 2.6.å¡«å†™**ç¨åŠ¡ä¿¡æ¯**

##### 2.6.1.ç¨åŠ¡ä¿¡æ¯è¿™ä¸€å—äº†è§£ä¸æ˜¯å¾ˆå¤šï¼Œä¸è¿‡å› ä¸ºæ˜¯å›½å†…å¼€å‘è€…ï¼Œå¯ä»¥ä¸ç”¨å¤ªè´¹å¿ƒï¼Œç¨åŠ¡ä¿¡æ¯åˆ†3ç§ï¼š

    U.S Tax Forms         ç¾å›½ç¨åŠ¡
    Australia Tax Forms   æ¾³å¤§åˆ©äºšç¨åŠ¡
    Canada Tax Form       åŠ æ‹¿å¤§ç¨åŠ¡

![](/assets/postAssets/2019/708266-20171227152332253-1265763462.jpg)

##### 2.6.2.ä¸€å †æ¡çº¦

æˆ‘é€‰æ‹©çš„æ˜¯U.S Tax Formsï¼Œé€‰æ‹©åä¼šé—®ä½ ä¸¤ä¸ªé—®é¢˜ï¼š

* ç¬¬1ä¸ªé—®é¢˜å¦‚ä¸‹ï¼šè¯¢é—®ä½ æ˜¯å¦æ˜¯ç¾å›½å±…æ°‘ï¼Œæœ‰æ²¡æœ‰ç¾å›½ä¼™ä¼´å…³ç³»æˆ–è€…ç¾å›½å…¬å¸ï¼Œå¦‚æœæ²¡æœ‰ç›´æ¥é€‰æ‹©Noã€‚

![](/assets/postAssets/2019/708266-20171227152411206-157671122.png)

æ¥ä¸‹æ¥ç¬¬äºŒä¸ªé—®é¢˜å¦‚ä¸‹ï¼šè¯¢é—®ä½ æœ‰æ²¡æœ‰åœ¨ç¾å›½çš„å•†ä¸šæ€§æ´»åŠ¨ï¼Œæ²¡æœ‰ä¹Ÿç›´æ¥é€‰No

![](/assets/postAssets/2019/708266-20171227152437847-411017844.png)

##### 2.6.3.ç„¶åå¡«å†™ä½ çš„ç¨åŠ¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ï¼š

    Individual or Organization Name             ä¸ªäººæˆ–è€…ç»„ç»‡åç§°
    Country of incorporation                    æ‰€åœ¨å›½å®¶
    Type of Beneficial Owner                    å—ç›Šæ–¹å¼ï¼Œç‹¬ç«‹å¼€å‘è€…é€‰ä¸ªäºº
    Permanent Residence                         å±…ä½åœ°å€
    Mailing address                             é‚®å¯„åœ°å€
    Name of Person Making this Declaration      å£°æ˜äºº
    Title                                       å¤´è¡”

![](/assets/postAssets/2019/708266-20171227152517863-642839899.jpg)

##### 2.6.4.æ‰“é’©

![](/assets/postAssets/2019/708266-20171227152555238-1159841294.jpg)

##### 2.6.5.æ¾³å¤§åˆ©äºšçš„ä¸è¦ç®¡äº†

![](/assets/postAssets/2019/708266-20171227152619597-682852003.jpg)

##### 2.6.6.åŠ æ‹¿å¤§çš„ä¹Ÿä¸ç”¨ç®¡äº†

![](/assets/postAssets/2019/708266-20171227152650081-2006366520.jpg)

#### 2.7.å¡«å†™å®Œæˆ

![](/assets/postAssets/2019/708266-20171227152715691-1138393758.jpg)

#### 2.8.å¾…å®¡æ ¸

ä½ å¡«å†™å®Œæ‰€æœ‰èµ„æ–™åï¼ŒåˆåŒçŠ¶æ€å°±ä¼šå˜æˆProcessingï¼Œå¤§æ¦‚24å°æ—¶å†…å°±ä¼šæœ‰ç»“æœã€‚

### ä¸‰.å†…è´­å•†å“çš„æ·»åŠ 

#### 3.1.åˆ›å»ºå†…è´­å•†å“

![](/assets/postAssets/2019/708266-20171227152821472-829271067.jpg)

#### 3.2.é€‰æ‹©å†…è´­ç±»å‹

##### 3.2.1.æ¶ˆè€—å‹å•†å“ï¼šç±»ä¼¼æ¸¸æˆä¸­çš„é’»çŸ³ï¼Œè¿˜æœ‰ç°åœ¨æŸäº›APPä¸­çš„è´§å¸ï¼Œæ¯”å¦‚æ–—é±¼é‡Œçš„é±¼ä¸¸ã€æ˜ å®¢é‡Œçš„æ˜ ç¥¨ã€‚ä¼šè¢«æ¶ˆè€—çš„ï¼Œè¦é€‰æ‹©æ¶ˆè€—å‹å•†å“

> æ³¨æ„ï¼šå¤§å¤šæ•°çš„æ¶ˆè€—å‹å•†å“éƒ½æ˜¯éœ€è¦ç™»å½•çš„ï¼Œå› ä¸ºéœ€è¦åœ¨æ•°æ®åº“å­˜ä½™é¢ã€‚åœ¨ç™»å½•ä¹‹å‰ï¼Œä½ æœ€å¥½ä¸è¦è®©ç”¨æˆ·çœ‹åˆ°å•†å“ï¼Œæœ‰å¯èƒ½ä¼šå› ä¸ºè¿™ä¸ªåŸå› è¢«æ‹’

##### 3.2.2.éæ¶ˆè€—å‹å•†å“ï¼šæ— æ³•è¢«æ¶ˆè€—çš„å•†å“ï¼Œæ¯”å¦‚ä¸Šæ–‡æåˆ°çš„è§†é¢‘è¯¾ç¨‹ï¼Œä¸€æ¬¡è´­ä¹°ï¼Œå°±åº”è¯¥æ°¸ä¹…å¯ä»¥è§‚çœ‹

> æ³¨æ„ï¼šå½“ä½ ä½¿ç”¨éæ¶ˆè€—å‹å•†å“æ—¶ï¼Œä½ éœ€è¦æ·»åŠ ä¸€ä¸ªæ¢å¤è´­ä¹°çš„æŒ‰é’®,è¿™ä¸ªå¸¸è§äºå„ç§æ¸¸æˆä¸­ï¼Œå…¶å®çŸ¥é“è¿™ä¸ªè§„å®šä»¥åè¿˜æ˜¯æŒºå¥½ç†è§£çš„ï¼Œéæ¶ˆè€—å‹å•†å“æ˜¯ä¸å¯è¢«æ¶ˆè€—çš„ï¼Œä¸€æ¬¡è´­ä¹°ç»ˆèº«ä½¿ç”¨çš„ï¼Œéæ¶ˆè€—å‹çš„å•†å“æ˜¯è·ŸappleIdç»‘å®šçš„ï¼Œå°±æ˜¯ä½ å¹³æ—¶ä¸‹è½½APPè®©ä½ è¾“å…¥è´¦å·å¯†ç çš„å†…ä¸ªã€‚ä½ éœ€è¦ä¸€ä¸ªæ¢å¤è´­ä¹°çš„æŒ‰é’®ï¼Œæ¥è®©ç”¨æˆ·æ¢å¤ä»–è´­ä¹°çš„å†…å®¹

##### 3.2.3.è®¢é˜…ç±»å‹å•†å“ï¼šå¦‚æœä½ çš„å…¬å¸æ˜¯å¤–åŒ…å…¬å¸ï¼Œæœ‰è®¢é˜…ç±»å‹å•†å“çš„APPä¸€å®šè¦ç”¨å®¢æˆ·çš„è´¦å·æäº¤å®¡æ ¸ï¼Œå› ä¸ºå½“APPä¸­æœ‰è¿‡è®¢é˜…ç±»å‹å•†å“ï¼Œæ³¨æ„æ˜¯æœ‰è¿‡ï¼Œåˆ›å»ºè¿‡å†åˆ é™¤ä¹Ÿç®—ï¼Œè¿™ä¸ªAPPæ— æ³•è¢«è½¬ç§»è´¦å·

> æ³¨æ„ï¼šä½¿ç”¨æˆ–æ›¾ç»ä½¿ç”¨è¿‡è®¢é˜…å‹å•†å“çš„APPæ— æ³•è½¬ç§»

![](/assets/postAssets/2019/708266-20171227152856425-964894479.jpg)

![](/assets/postAssets/2019/708266-20171227152917972-613636153.jpg)

![](/assets/postAssets/2019/708266-20171227153008988-252812909.jpg)

![](/assets/postAssets/2019/708266-20171227153037706-1975127527.jpg)

#### 3.3.åˆ›å»ºå¥½çš„äº§å“

![](/assets/postAssets/2019/708266-20171227153118910-503578344.jpg)

#### 3.4.åœ¨ä¸Šçº¿çš„æ—¶å€™è®°å¾—æ·»åŠ å†…è´­çš„å•†å“

![](/assets/postAssets/2019/15517784476487.jpg)

![](/assets/postAssets/2019/708266-20171227153329675-1668587926.jpg)

### å››.æ·»åŠ æ²™ç›’æµ‹è¯•è´¦å·

#### 4.1.æ·»åŠ æ²™ç›’æµ‹è¯•çš„å…¥å£

![](/assets/postAssets/2019/708266-20171227153359269-877476826.jpg)

#### 4.2.æ·»åŠ æ²™ç›’æµ‹è¯•è´¦å·

![](/assets/postAssets/2019/708266-20171227153434238-1132652117.jpg)

#### 4.3.å…·ä½“çš„æµ‹è¯•è´¦å·ä¿¡æ¯å¡«å†™

![](/assets/postAssets/2019/708266-20171227153503269-1708364146.jpg)

### äº”.å†…è´­ä»£ç çš„å…·ä½“å®ç°

æˆ‘åˆ›å»ºäº†ä¸€ä¸ªè´­ä¹°é‡‘å¸çš„å†…è´­æ§åˆ¶å™¨**ApplePayCIOViewController**åœ¨æ­¤,æˆ‘ä»…ä»…å‘å¤§å®¶è´´å‡º.mçš„è¯¦ç»†ä»£ç 

#### 5.1.å†…è´­çš„æµç¨‹è¯¦ç»†è®²è§£

1. ç”¨æˆ·å…ˆæ‹¿åˆ°è´­ä¹°äº§å“çš„å•å­
2. æ‹¿ç€å•å­å»è‹¹æœé‚£é‡Œäº¤é’±ï¼Œäº¤å®Œé’±è®©è‹¹æœåœ¨å•å­ä¸Šç›–ä¸ªç« 
3. æ‹¿ç€ç›–äº†ç« çš„å•å­ä¼ ç»™è‡ªå·±çš„æœåŠ¡å™¨æ¥éªŒè¯æ˜¯å¦çœŸçš„æ”¯ä»˜æˆåŠŸ
4. æ ¹æ®æœåŠ¡å™¨è¿”å›çš„ä¿¡æ¯åšå…·ä½“çš„å¤„ç†

![](/assets/postAssets/2019/708266-20171227153559550-335262075.jpg)

#### 5.2.ä»£ç 

1. å…ˆå¯¼å…¥StoreKit.frameworkåº“
2. åˆ›å»ºApplePayCIOViewControllerï¼Œéµå®ˆåè®®<SKPaymentTransactionObserver,SKProductsRequestDelegate>

```swift 
// ApplePayCIOViewController.m
 
#import "ApplePayCIOViewController.h"
#import <StoreKit/StoreKit.h>
// äº§å“çš„ID
#define ProductID1 @"CIOCourses1"
@interface ApplePayCIOViewController ()<SKProductsRequestDelegate,SKPaymentTransactionObserver>
{
    NSString *selectProductID;
}
@end
@implementation ApplePayCIOViewController
-(void)viewWillAppear:(BOOL)animated{
   [super viewWillAppear:animated];
   // æ·»åŠ è§‚å¯Ÿè€…
   [[SKPaymentQueue defaultQueue] addTransactionObserver:self];   
}
-(void)viewWillDisappear:(BOOL)animated{
   [super viewWillDisappear:animated];
   // ç§»é™¤è§‚å¯Ÿè€…
  [[SKPaymentQueue defaultQueue] removeTransactionObserver:self];
}

- (void)viewDidLoad {
  [super viewDidLoad];
   self.title = @"å†…è´­";

   self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"æµ‹è¯•" style:UIBarButtonItemStylePlain target:self action:@selector(test)];

    // æ¢å¤è´­ä¹°çš„æŒ‰é’®
    UIButton * revert = [[UIButton alloc]initWithFrame:CGRectMake(20, 100, 100, 80)];
    [revert setBackgroundColor:JKRandomColor];
    [revert addTarget:self action:@selector(replyToBuy) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview: revert];
    self.view.backgroundColor =[UIColor redColor];
}

#pragma mark æ¢å¤è´­ä¹°(ä¸»è¦æ˜¯é’ˆå¯¹éæ¶ˆè€—äº§å“)
-(void)replyToBuy{

   [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
}
#pragma mark æµ‹è¯•å†…è´­
-(void)test{

  if([SKPaymentQueue canMakePayments]){

    // productIDå°±æ˜¯ä½ åœ¨åˆ›å»ºè´­ä¹°é¡¹ç›®æ—¶æ‰€å¡«å†™çš„äº§å“ID
    selectProductID = [NSString stringWithFormat:@"%@",ProductID1];
    [self requestProductID:selectProductID];

   }else{
              
   // NSLog(@"ä¸å…è®¸ç¨‹åºå†…ä»˜è´¹");
   UIAlertView *alertError = [[UIAlertView alloc] initWithTitle:@"æ¸©é¦¨æç¤º"
                                                                                                                    message:@"è¯·å…ˆå¼€å¯åº”ç”¨å†…ä»˜è´¹è´­ä¹°åŠŸèƒ½ã€‚"
                                                                                                    delegate:nil
                                                                                                              cancelButtonTitle:@"ç¡®å®š"
                                                                                                        otherButtonTitles: nil];
   [alertError show];
   }
}
#pragma mark 1.è¯·æ±‚æ‰€æœ‰çš„å•†å“ID
-(void)requestProductID:(NSString *)productID{

   // 1.æ‹¿åˆ°æ‰€æœ‰å¯å–å•†å“çš„IDæ•°ç»„
   NSArray *productIDArray = [[NSArray alloc]initWithObjects:productID, nil];
   NSSet *sets = [[NSSet alloc]initWithArray:productIDArray];

   // 2.å‘è‹¹æœå‘é€è¯·æ±‚ï¼Œè¯·æ±‚æ‰€æœ‰å¯ä¹°çš„å•†å“
   // 2.1.åˆ›å»ºè¯·æ±‚å¯¹è±¡
   SKProductsRequest *sKProductsRequest = [[SKProductsRequest alloc]initWithProductIdentifiers:sets];
   // 2.2.è®¾ç½®ä»£ç†(åœ¨ä»£ç†æ–¹æ³•é‡Œé¢è·å–æ‰€æœ‰çš„å¯å–çš„å•†å“)
   sKProductsRequest.delegate = self;
   // 2.3.å¼€å§‹è¯·æ±‚
   [sKProductsRequest start];

}
#pragma mark 2.è‹¹æœé‚£è¾¹çš„å†…è´­ç›‘å¬
-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response{

   NSLog(@"å¯å–å•†å“çš„æ•°é‡=%ld",response.products.count);

   NSArray *product = response.products;
   if([product count] == 0){

     NSLog(@"æ²¡æœ‰å•†å“");
     return;
   }

 for (SKProduct *sKProduct in product) {

      NSLog(@"pro info");
      NSLog(@"SKProduct æè¿°ä¿¡æ¯ï¼š%@", sKProduct.description);
      NSLog(@"localizedTitle äº§å“æ ‡é¢˜ï¼š%@", sKProduct.localizedTitle);
      NSLog(@"localizedDescription äº§å“æè¿°ä¿¡æ¯ï¼š%@",sKProduct.localizedDescription);
      NSLog(@"price ä»·æ ¼ï¼š%@",sKProduct.price);
      NSLog(@"productIdentifier Product idï¼š%@",sKProduct.productIdentifier);

     if([sKProduct.productIdentifier isEqualToString: selectProductID]){
  
        [self buyProduct:sKProduct];
  
        break;
  
     }else{
  
      //NSLog(@"ä¸ä¸ä¸ç›¸åŒ");
     }
  }

}

#pragma mark å†…è´­çš„ä»£ç è°ƒç”¨
-(void)buyProduct:(SKProduct *)product{

   // 1.åˆ›å»ºç¥¨æ®
  SKPayment *skpayment = [SKPayment paymentWithProduct:product];

  // 2.å°†ç¥¨æ®åŠ å…¥åˆ°äº¤æ˜“é˜Ÿåˆ—
  [[SKPaymentQueue defaultQueue] addPayment:skpayment];

  // 3.æ·»åŠ è§‚å¯Ÿè€…ï¼Œç›‘å¬ç”¨æˆ·æ˜¯å¦ä»˜é’±æˆåŠŸ(ä¸åœ¨æ­¤å¤„æ·»åŠ è§‚å¯Ÿè€…)
  //[[SKPaymentQueue defaultQueue] addTransactionObserver:self];

}

#pragma mark 4.å®ç°è§‚å¯Ÿè€…ç›‘å¬ä»˜é’±çš„ä»£ç†æ–¹æ³•,åªè¦äº¤æ˜“å‘ç”Ÿå˜åŒ–å°±ä¼šèµ°ä¸‹é¢çš„æ–¹æ³•
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray<SKPaymentTransaction *> *)transactions{

  /*
    SKPaymentTransactionStatePurchasing,    æ­£åœ¨è´­ä¹°
    SKPaymentTransactionStatePurchased,     å·²ç»è´­ä¹°
    SKPaymentTransactionStateFailed,        è´­ä¹°å¤±è´¥
    SKPaymentTransactionStateRestored,      å›å¤è´­ä¹°ä¸­
    SKPaymentTransactionStateDeferred       äº¤æ˜“è¿˜åœ¨é˜Ÿåˆ—é‡Œé¢ï¼Œä½†æœ€ç»ˆçŠ¶æ€è¿˜æ²¡æœ‰å†³å®š
  */

  for (SKPaymentTransaction *transaction in transactions) {
     switch (transaction.transactionState) {
           case SKPaymentTransactionStatePurchasing:{
      
                NSLog(@"æ­£åœ¨è´­ä¹°");
           }break;
           case SKPaymentTransactionStatePurchased:{
      
              NSLog(@"è´­ä¹°æˆåŠŸ");
              // è´­ä¹°åå‘Šè¯‰äº¤æ˜“é˜Ÿåˆ—ï¼ŒæŠŠè¿™ä¸ªæˆåŠŸçš„äº¤æ˜“ç§»é™¤æ‰
              [queue finishTransaction:transaction];
              [self buyAppleStoreProductSucceedWithPaymentTransactionp:transaction];
           }break;
           case SKPaymentTransactionStateFailed:{
      
               NSLog(@"è´­ä¹°å¤±è´¥");
               // è´­ä¹°å¤±è´¥ä¹Ÿè¦æŠŠè¿™ä¸ªäº¤æ˜“ç§»é™¤æ‰
               [queue finishTransaction:transaction];
           }break;
           case SKPaymentTransactionStateRestored:{
               NSLog(@"å›å¤è´­ä¹°ä¸­,ä¹Ÿå«åšå·²ç»è´­ä¹°");
               // å›å¤è´­ä¹°ä¸­ä¹Ÿè¦æŠŠè¿™ä¸ªäº¤æ˜“ç§»é™¤æ‰
               [queue finishTransaction:transaction];
           }break;
  case SKPaymentTransactionStateDeferred:{
      
              NSLog(@"äº¤æ˜“è¿˜åœ¨é˜Ÿåˆ—é‡Œé¢ï¼Œä½†æœ€ç»ˆçŠ¶æ€è¿˜æ²¡æœ‰å†³å®š");
           }break;
           default:
           break;
         }
    }
 }

// è‹¹æœå†…è´­æ”¯ä»˜æˆåŠŸ
- (void)buyAppleStoreProductSucceedWithPaymentTransactionp:(SKPaymentTransaction *)paymentTransactionp {

  NSString * productIdentifier = paymentTransactionp.payment.productIdentifier;
  // NSLog(@"productIdentifier Product idï¼š%@", productIdentifier);
  NSString *transactionReceiptString= nil;

  //ç³»ç»ŸIOS7.0ä»¥ä¸Šè·å–æ”¯ä»˜éªŒè¯å‡­è¯çš„æ–¹å¼åº”è¯¥æ”¹å˜ï¼Œåˆ‡éªŒè¯è¿”å›çš„æ•°æ®ç»“æ„ä¹Ÿä¸ä¸€æ ·äº†ã€‚
   NSString *version = [UIDevice currentDevice].systemVersion;
   if([version intValue] >= 7.0){
       // éªŒè¯å‡­æ®ï¼Œè·å–åˆ°è‹¹æœè¿”å›çš„äº¤æ˜“å‡­æ®
       // appStoreReceiptURL iOS7.0å¢åŠ çš„ï¼Œè´­ä¹°äº¤æ˜“å®Œæˆåï¼Œä¼šå°†å‡­æ®å­˜æ”¾åœ¨è¯¥åœ°å€
       NSURLRequest * appstoreRequest = [NSURLRequest requestWithURL:[[NSBundle mainBundle]appStoreReceiptURL]];
       NSError *error = nil;
       NSData * receiptData = [NSURLConnection sendSynchronousRequest:appstoreRequest returningResponse:nil error:&error];
       transactionReceiptString = [receiptData base64EncodedStringWithOptions:NSDataBase64EncodingEndLineWithLineFeed];
   }else{

      NSData * receiptData = paymentTransactionp.transactionReceipt;
        //  transactionReceiptString = [receiptData base64EncodedString];
      transactionReceiptString = [receiptData base64EncodedStringWithOptions:NSDataBase64EncodingEndLineWithLineFeed];
    }
   // å»éªŒè¯æ˜¯å¦çœŸæ­£çš„æ”¯ä»˜æˆåŠŸäº†
   [self checkAppStorePayResultWithBase64String:transactionReceiptString];

}

- (void)checkAppStorePayResultWithBase64String:(NSString *)base64String {

   /* ç”Ÿæˆè®¢å•å‚æ•°ï¼Œæ³¨æ„æ²™ç›’æµ‹è¯•è´¦å·ä¸çº¿ä¸Šæ­£å¼è‹¹æœè´¦å·çš„éªŒè¯é€”å¾„ä¸ä¸€æ ·ï¼Œè¦ç»™åå°æ ‡æ˜ */
  /*
   æ³¨æ„ï¼š
   è‡ªå·±æµ‹è¯•çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯æ²™ç›’è´­ä¹°(æµ‹è¯•ç¯å¢ƒ)
   App Storeå®¡æ ¸çš„æ—¶å€™ä¹Ÿä½¿ç”¨çš„æ˜¯æ²™ç›’è´­ä¹°(æµ‹è¯•ç¯å¢ƒ)
   ä¸Šçº¿ä»¥åå°±ä¸æ˜¯ç”¨çš„æ²™ç›’è´­ä¹°äº†(æ­£å¼ç¯å¢ƒ)
   æ‰€ä»¥æ­¤æ—¶åº”è¯¥å…ˆéªŒè¯æ­£å¼ç¯å¢ƒï¼Œåœ¨éªŒè¯æµ‹è¯•ç¯å¢ƒ

  æ­£å¼ç¯å¢ƒéªŒè¯æˆåŠŸï¼Œè¯´æ˜æ˜¯çº¿ä¸Šç”¨æˆ·åœ¨ä½¿ç”¨
  æ­£å¼ç¯å¢ƒéªŒè¯ä¸æˆåŠŸè¿”å›21007ï¼Œè¯´æ˜æ˜¯è‡ªå·±æµ‹è¯•æˆ–è€…å®¡æ ¸äººå‘˜åœ¨æµ‹è¯•
   */
   /*
     è‹¹æœAppStoreçº¿ä¸Šçš„è´­ä¹°å‡­è¯åœ°å€æ˜¯ï¼š https://buy.itunes.apple.com/verifyReceipt
     æµ‹è¯•åœ°å€æ˜¯ï¼šhttps://sandbox.itunes.apple.com/verifyReceipt
    */
   //    NSNumber *sandbox;
   NSString *sandbox;
   #if (defined(APPSTORE_ASK_TO_BUY_IN_SANDBOX) && defined(DEBUG))
  //sandbox = @(0);
  sandbox = @"0";
  #else
  //sandbox = @(1);
  sandbox = @"1";
  #endif

  NSMutableDictionary *prgam = [[NSMutableDictionary alloc] init];;
  [prgam setValue:sandbox forKey:@"sandbox"];
  [prgam setValue:base64String forKey:@"reciept"];

  /*
     è¯·æ±‚åå°æ¥å£ï¼ŒæœåŠ¡å™¨å¤„éªŒè¯æ˜¯å¦æ”¯ä»˜æˆåŠŸï¼Œä¾æ®è¿”å›ç»“æœåšç›¸åº”é€»è¾‘å¤„ç†
     0 ä»£è¡¨æ²™ç›’  1ä»£è¡¨ æ­£å¼çš„å†…è´­
     æœ€åæœ€éªŒè¯åçš„
   */
    /*
      å†…è´­éªŒè¯å‡­æ®è¿”å›ç»“æœçŠ¶æ€ç è¯´æ˜
      21000 App Storeæ— æ³•è¯»å–ä½ æä¾›çš„JSONæ•°æ®  
      21002 æ”¶æ®æ•°æ®ä¸ç¬¦åˆæ ¼å¼  
      21003 æ”¶æ®æ— æ³•è¢«éªŒè¯  
      21004 ä½ æä¾›çš„å…±äº«å¯†é’¥å’Œè´¦æˆ·çš„å…±äº«å¯†é’¥ä¸ä¸€è‡´  
      21005 æ”¶æ®æœåŠ¡å™¨å½“å‰ä¸å¯ç”¨  
      21006 æ”¶æ®æ˜¯æœ‰æ•ˆçš„ï¼Œä½†è®¢é˜…æœåŠ¡å·²ç»è¿‡æœŸã€‚å½“æ”¶åˆ°è¿™ä¸ªä¿¡æ¯æ—¶ï¼Œè§£ç åçš„æ”¶æ®ä¿¡æ¯ä¹ŸåŒ…å«åœ¨è¿”å›å†…å®¹ä¸­  
      21007 æ”¶æ®ä¿¡æ¯æ˜¯æµ‹è¯•ç”¨ï¼ˆsandboxï¼‰ï¼Œä½†å´è¢«å‘é€åˆ°äº§å“ç¯å¢ƒä¸­éªŒè¯  
      21008 æ”¶æ®ä¿¡æ¯æ˜¯äº§å“ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œä½†å´è¢«å‘é€åˆ°æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯
      */

   NSLog(@"å­—å…¸==%@",prgam);

}

#pragma mark å®¢æˆ·ç«¯éªŒè¯è´­ä¹°å‡­æ®
- (void)verifyTransactionResult
{
   // éªŒè¯å‡­æ®ï¼Œè·å–åˆ°è‹¹æœè¿”å›çš„äº¤æ˜“å‡­æ®
   // appStoreReceiptURL iOS7.0å¢åŠ çš„ï¼Œè´­ä¹°äº¤æ˜“å®Œæˆåï¼Œä¼šå°†å‡­æ®å­˜æ”¾åœ¨è¯¥åœ°å€
   NSURL *receiptURL = [[NSBundle mainBundle] appStoreReceiptURL];
   // ä»æ²™ç›’ä¸­è·å–åˆ°è´­ä¹°å‡­æ®
   NSData *receipt = [NSData dataWithContentsOfURL:receiptURL];
   // ä¼ è¾“çš„æ˜¯BASE64ç¼–ç çš„å­—ç¬¦ä¸²
   /**
      BASE64 å¸¸ç”¨çš„ç¼–ç æ–¹æ¡ˆï¼Œé€šå¸¸ç”¨äºæ•°æ®ä¼ è¾“ï¼Œä»¥åŠåŠ å¯†ç®—æ³•çš„åŸºç¡€ç®—æ³•ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­èƒ½å¤Ÿä¿è¯æ•°æ®ä¼ è¾“çš„ç¨³å®šæ€§
      BASE64æ˜¯å¯ä»¥ç¼–ç å’Œè§£ç çš„
    */
   NSDictionary *requestContents = @{
                            @"receipt-data": [receipt base64EncodedStringWithOptions:0]
                            };
   NSError *error;
   // è½¬æ¢ä¸º JSON æ ¼å¼
   NSData *requestData = [NSJSONSerialization dataWithJSONObject:requestContents
                                                options:0
                                                  error:&error];
   // ä¸å­˜åœ¨
   if (!requestData) { /* ... Handle error ... */ }

   // å‘é€ç½‘ç»œPOSTè¯·æ±‚ï¼Œå¯¹è´­ä¹°å‡­æ®è¿›è¡ŒéªŒè¯
   NSString *verifyUrlString;
   #if (defined(APPSTORE_ASK_TO_BUY_IN_SANDBOX) && defined(DEBUG))
   verifyUrlString = @"https://sandbox.itunes.apple.com/verifyReceipt";
   #else
    verifyUrlString = @"https://buy.itunes.apple.com/verifyReceipt";
   #endif
   // å›½å†…è®¿é—®è‹¹æœæœåŠ¡å™¨æ¯”è¾ƒæ…¢ï¼ŒtimeoutInterval éœ€è¦é•¿ä¸€ç‚¹
   NSMutableURLRequest *storeRequest = [NSMutableURLRequest requestWithURL:[[NSURL alloc] initWithString:verifyUrlString] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10.0f];

   [storeRequest setHTTPMethod:@"POST"];
   [storeRequest setHTTPBody:requestData];

   // åœ¨åå°å¯¹åˆ—ä¸­æäº¤éªŒè¯è¯·æ±‚ï¼Œå¹¶è·å¾—å®˜æ–¹çš„éªŒè¯JSONç»“æœ
   NSOperationQueue *queue = [[NSOperationQueue alloc] init];
   [NSURLConnection sendAsynchronousRequest:storeRequest queue:queue
                 completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) {
                     if (connectionError) {
                         NSLog(@"é“¾æ¥å¤±è´¥");
                     } else {
                         NSError *error;
                         NSDictionary *jsonResponse = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];
                         if (!jsonResponse) {
                             NSLog(@"éªŒè¯å¤±è´¥");
                         }
                         
                         // æ¯”å¯¹ jsonResponse ä¸­ä»¥ä¸‹ä¿¡æ¯åŸºæœ¬ä¸Šå¯ä»¥ä¿è¯æ•°æ®å®‰å…¨
                         /*
                          bundle_id
                          application_version
                          product_id
                          transaction_id
                          */
                         
                         NSLog(@"éªŒè¯æˆåŠŸ");
                     }
                 }];

}
@end
```  


### å…­.å†…è´­çš„æ³¨æ„äº‹é¡¹

1. ä¸€èˆ¬å‘ç”Ÿäºé¦–æ¬¡æäº¤appæˆ–æ·»åŠ æ–°å•†å“ï¼Œå½“ä½ çš„appé€šè¿‡å®¡æ ¸ä»¥åï¼Œä½ å‘ç°åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹è·å–ä¸åˆ°å•†å“ï¼Œè¿™æ˜¯å› ä¸ºappè™½ç„¶è¿‡å®¡æ ¸äº†ï¼Œä½†æ˜¯å†…è´­å•†å“è¿˜æ²¡æœ‰æ­£å¼æ·»åŠ åˆ°è‹¹æœçš„æœåŠ¡å™¨é‡Œï¼Œè€å¿ƒç­‰å¾…ä¸€æ®µæ—¶é—´å°±å¯ä»¥å•¦ï½
2.  ä»£ç ä¸­çš„_currentProIdæ‰€å¡«å†™çš„æ˜¯ä½ çš„è´­ä¹°é¡¹ç›®çš„çš„IDï¼Œè¿™ä¸ªå’Œç¬¬äºŒæ­¥åˆ›å»ºçš„å†…è´­çš„productIDè¦ä¸€è‡´ï¼›æœ¬ä¾‹ä¸­æ˜¯ 123ã€‚
3.  åœ¨ç›‘å¬è´­ä¹°ç»“æœåï¼Œä¸€å®šè¦è°ƒç”¨[[SKPaymentQueue defaultQueue] finishTransaction:tran];æ¥å…è®¸ä½ ä»æ”¯ä»˜é˜Ÿåˆ—ä¸­ç§»é™¤äº¤æ˜“ã€‚
4.  æ²™ç›’ç¯å¢ƒæµ‹è¯•appStoreå†…è´­æµç¨‹çš„æ—¶å€™ï¼Œè¯·ä½¿ç”¨æ²¡è¶Šç‹±çš„è®¾å¤‡ã€‚
5.  è¯·åŠ¡å¿…ä½¿ç”¨çœŸæœºæ¥æµ‹è¯•ï¼Œä¸€åˆ‡ä»¥çœŸæœºä¸ºå‡†ã€‚
6.  é¡¹ç›®çš„Bundle identifieréœ€è¦ä¸æ‚¨ç”³è¯·AppIDæ—¶å¡«å†™çš„bundleIDä¸€è‡´ï¼Œä¸ç„¶ä¼šæ— æ³•è¯·æ±‚åˆ°å•†å“ä¿¡æ¯ã€‚
7.  çœŸæœºæµ‹è¯•çš„æ—¶å€™ï¼Œä¸€å®šè¦é€€å‡ºåŸæ¥çš„è´¦å·ï¼Œæ‰èƒ½ç”¨æ²™ç›’æµ‹è¯•è´¦å·
8.  äºŒæ¬¡éªŒè¯ï¼Œè¯·æ³¨æ„åŒºåˆ†å®ï¼Œ æµ‹è¯•ç”¨æ²™ç›’éªŒè¯ï¼ŒApp Storeå®¡æ ¸çš„æ—¶å€™ä¹Ÿä½¿ç”¨çš„æ˜¯æ²™ç›’è´­ä¹°ï¼Œæ‰€ä»¥éªŒè¯è´­ä¹°å‡­è¯çš„æ—¶å€™éœ€è¦åˆ¤æ–­è¿”å›Status Codeå†³å®šæ˜¯å¦å»æ²™ç›’è¿›è¡ŒäºŒæ¬¡éªŒè¯ï¼Œä¸ºäº†çº¿ä¸Šç”¨æˆ·çš„ä½¿ç”¨ï¼ŒéªŒè¯çš„é¡ºåºè‚¯å®šæ˜¯å…ˆéªŒè¯æ­£å¼ç¯å¢ƒï¼Œæ­¤æ—¶è‹¥è¿”å›å€¼ä¸º21007ï¼Œå°±éœ€è¦å»æ²™ç›’äºŒæ¬¡éªŒè¯ï¼Œå› ä¸ºæ­¤è´­ä¹°çš„æ˜¯åœ¨æ²™ç›’è¿›è¡Œçš„ã€‚
9. æ‚¨çš„åº”ç”¨æ˜¯å¦å¤„äºç­‰å¾…å¼€å‘è€…å‘å¸ƒï¼ˆPending Developer Releaseï¼‰çŠ¶æ€ï¼Ÿç­‰å¾…å‘å¸ƒçŠ¶æ€çš„IAPæ˜¯æ— æ³•æµ‹è¯•çš„ã€‚
10. æ‚¨çš„å†…è´­é¡¹ç›®æ˜¯å¦æ˜¯æœ€è¿‘æ‰æ–°å»ºçš„ï¼Œæˆ–è€…è¿›è¡Œäº†æ›´æ”¹ï¼Ÿå†…è´­é¡¹ç›®éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½ååº”åˆ°æ‰€æœ‰æœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸€èˆ¬æ˜¯ä¸€ä¸¤å°æ—¶ï¼Œä¹Ÿå¯èƒ½å†é•¿ä¸€äº›è¾¾åˆ°è‹¥å¹²å°æ—¶ã€‚
11. æ‚¨åœ¨iTCä¸­Contracts, Tax, and Banking Informationé¡¹ç›®ä¸­æ˜¯å¦æœ‰è¿˜æ²¡æœ‰è®¾ç½®æˆ–è€…è¿‡æœŸäº†çš„é¡¹ç›®ï¼Ÿä¸å®Œæ•´çš„è´¢åŠ¡ä¿¡æ¯æ— æ³•è¿›è¡Œå†…è´­æµ‹è¯•ã€‚
12. æ‚¨æ˜¯åœ¨è¶Šç‹±è®¾å¤‡ä¸Šè¿›è¡Œå†…è´­æµ‹è¯•ä¹ˆï¼Ÿè¶Šç‹±è®¾å¤‡ä¸èƒ½ç”¨äºæ­£å¸¸å†…è´­ï¼Œæ‚¨éœ€è¦é‡è£…æˆ–è€…å¯»æ‰¾ä¸€å°æ²¡æœ‰è¶Šç‹±çš„è®¾å¤‡ã€‚
13. æ‚¨çš„åº”ç”¨æ˜¯å¦æ˜¯è¢«æ‹’çŠ¶æ€ï¼ˆRejectedï¼‰æˆ–è‡ªå·±æ‹’ç»ï¼ˆDeveloper Rejectedï¼‰äº†ï¼Ÿè¢«æ‹’ç»çŠ¶æ€çš„åº”ç”¨çš„è¯å¯¹åº”è¿˜æœªé€šè¿‡çš„å†…è´­é¡¹ç›®ä¹Ÿä¼šä¸€èµ·è¢«æ‹’ï¼Œå› æ­¤æ‚¨éœ€è¦é‡æ–°å°†IAPé¡¹ç›®è®¾ä¸ºCleared for Saleã€‚
14. æ‚¨ä½¿ç”¨çš„æµ‹è¯•è´¦å·æ˜¯å¦æ˜¯ç¾å›½åŒºè´¦å·ï¼Ÿè™½ç„¶ä¸æ˜¯ä¸€å®šéœ€è¦ï¼Œä½†æ˜¯é‰´äºå…¶ä»–åœ°åŒºçš„æµ‹è¯•è´¦å·ç»å¸¸æŠ½é£ï¼ŒåŠ ä¸Šç¾å›½åŒºè´¦å·ä¸€ç›´å¾ˆç¨³å®šï¼Œå› æ­¤å¼ºçƒˆå»ºè®®ä½¿ç”¨ç¾å›½åŒºè´¦å·ã€‚æ­£å¸¸æƒ…å†µä¸‹IAPä¸éœ€è¦è¿›è¡Œä¿¡ç”¨å¡ç»‘å®šå’Œå…¶ä»–ä¿¡æ¯å¡«å†™ï¼Œå¦‚æœä½ é‡åˆ°äº†è¿™ç§æƒ…å†µï¼Œå¯ä»¥è¯•è¯•åˆ é™¤è¿™ä¸ªæµ‹è¯•è´¦å·å†æ–°å»ºä¸€ä¸ªå…¶ä»–åœ°åŒºçš„ã€‚
15. æ‚¨æ˜¯å¦å°†è®¾å¤‡ä¸ŠåŸæ¥çš„appåˆ é™¤äº†ï¼Œå¹¶é‡æ–°è¿›è¡Œäº†å®‰è£…ï¼Ÿè®°å¾—åœ¨å®‰è£…å‰åšä¸€ä¸‹Cleanå’ŒClean Build Folderã€‚
16. æ‚¨çš„plistä¸­çš„Bundle identifierçš„å†…å®¹æ˜¯å¦å’Œæ‚¨çš„AppIDä¸€è‡´ï¼Ÿ

#### ä¸ƒ.å†…è´­å®¡æ ¸çš„æ³¨æ„äº‹é¡¹

##### 7.1.é¡¹ç›®é‡Œé¢çš„å†…è´­ä¸€å®šè¦å‹¾é€‰

![](/assets/postAssets/2019/15517787918706.jpg) 

##### 7.2.åè®®ä¸€å®šè¦é€šè¿‡(ä¸‹è½½çš„çŠ¶æ€)

![](/assets/postAssets/2019/15517788086026.jpg)

##### 7.3.è¯ä¹¦çš„é…ç½®æ–‡ä»¶é‡Œé¢è¦æ”¯æŒå†…è´­
        
![](/assets/postAssets/2019/15517788223125.jpg)

##### 7.4.é¡¹ç›®ç¬¬ä¸€æ¬¡ä½¿ç”¨å†…è´­ï¼Œ**å†…è´­çš„äº§å“ä¸€å®šè¦è·Ÿç€ç‰ˆæœ¬ä¸€èµ·æäº¤**ï¼Œå¦‚æœæäº¤è¢«æ‹’ï¼Œå†…è´­äº§å“è¦åˆ æ‰é‡æ–°å»º
     
![](/assets/postAssets/2019/15517788308719.jpg) 

#### å…«ã€èŠä¸€èŠå†…è´­ä¸Šçº¿ä¸è‹¹æœçš„æ²Ÿé€š

![](/assets/postAssets/2019/15517788382474.jpg)

1. åœ¨2018å¹´2æœˆåˆï¼Œå†…è´­å‡†å¤‡å……åˆ†ï¼Œæµ‹è¯•ç¯å¢ƒæµ‹è¯•ä»¥åŠTestFlightå¼€å‘ç¯å¢ƒæµ‹è¯•ï¼Œè´­ä¹°æµç¨‹éƒ½æ˜¯OKçš„ã€‚ä¿¡å¿ƒæ»¡æ»¡çš„æäº¤ç»™äº†è‹¹æœï¼Œç¬¬äºŒå¤©ï¼Œæœæ–­è¢«æ‹’ï¼Œè¯´è®©åŠ **æ¸¸å®¢è´­ä¹°**ğŸ˜…ï¼ŒæŒ‰ç…§è¦æ±‚åŠ äº†æ¸¸å®¢è´­ä¹°ï¼Œè®¾ç½®äº†ç”¨æˆ·è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ç¬¦[IDFV+KeyChain](https://www.jianshu.com/p/d8441003f8d8)æ¥åšæ¸¸å®¢è´­ä¹°
2. å½“æ¸¸å®¢è´­ä¹°åšå®Œï¼Œå¼€å¼€å¿ƒå¿ƒçš„å»æäº¤ï¼Œç¬¬äºŒå¤©å›å®¶è¿‡å¹´ï¼Œæ²¡æƒ³åˆ°åˆ°å®¶åæŠ€æœ¯æ€»ç›‘å‘Šè¯‰æˆ‘åˆè¢«è‹¹æœæ‹’ç»ï¼Œè¯´ç‚¹å‡»æ¸¸å®¢è´­ä¹°ä¸äº†ï¼Œé‚®ä»¶è¯´ipv6çš„é—®é¢˜(**ç¬¬2ï¼Œ3ï¼Œ4ï¼Œ5æ¬¡è¯´æ˜¯åœ¨ipv6 ä¸‹ç‚¹å‡»æ¸¸å®¢å†…è´­è´­ä¹°å§‹ç»ˆæ²¡æœ‰ååº”ï¼**)ï¼Œå› ä¸ºè‹¹æœå®¡æ ¸æµ‹è¯•äººå‘˜å¹¶éæŠ€æœ¯äººå‘˜ï¼Œä»–ä»¬åªèƒ½ä»ç°è±¡ç»™å‡ºç†ç”±ï¼Œæ‰€ä»¥ç»å¸¸ä¼šå½’ä¸ºipv6é—®é¢˜ï¼Œä½†ä¸ä¸€å®šæ˜¯ipv6é—®é¢˜ï¼Œæœ‰æ—¶å€™ç½‘ç»œä¸å¥½ï¼Œæˆ–è®¸ä»–ä»¬æµ‹è¯•çš„iPadå‡ºé—®é¢˜äº†ã€‚äºæ˜¯æˆ‘åœ¨[Macä¸Šæ­å»ºipv6æµ‹è¯•](http://www.cocoachina.com/ios/20160613/16626.html)Appï¼ŒåŒ…æ‹¬ç¿»å¢™ä»€ä¹ˆçš„ï¼Œå½•è§†é¢‘ï¼Œéƒ½è¯´æ˜åœ¨ipv6ä¸‹æ²¡é—®é¢˜ï¼Œè´­ä¹°æµç¨‹å¾ˆé¡ºç•…ã€‚ç„¶åç»™è‹¹æœå›å¤ï¼Œè¯·æ±‚é‡æ–°å®¡æ ¸ã€‚
3. è¯·æ±‚é‡æ–°å®¡æ ¸çš„ç»“æœæ˜¯è¿˜æ˜¯ç‚¹å‡»è´­ä¹°æ²¡ååº”ï¼ˆä¹Ÿå¯ä»¥è§£é‡Šä¸ºè‹¹æœé‚£å®¡æ ¸æµ‹è¯•å•†å“ä¸€ç›´æ˜¯æ— æ•ˆçš„ï¼‰ï¼Œåé¢å¼€å§‹æ€€ç–‘å®¡æ ¸äººå‘˜çš„ç½‘ç»œä¸å¥½æˆ–è€…æ˜¯æµ‹è¯•çš„åœ°åŒºæ²¡æ¢ã€‚äºæ˜¯è¯·æ±‚äº†æŠ€æœ¯çš„æ”¯æŒä»¥åŠå®¢æœä»£è¡¨çš„ç”µè¯ååŠ©ï¼ŒæŠ€æœ¯æµ‹è¯•è¯´å†…è´­æ²¡é—®é¢˜äº†ï¼ŒåŸå› æ˜¯æ˜¯å®¡æ ¸äººå‘˜çš„è®¾å¤‡çš„é—®é¢˜ï¼ˆå¤§çˆ·çš„å®¡æ ¸äººå‘˜ï¼Œç™½ç—´å•Šï¼‰ã€‚äºæ˜¯å†æ¬¡è¯·æ±‚å®¡æ ¸äººå‘˜å®¡æ ¸ã€‚
4. è¯·æ±‚å®¡æ ¸è¿˜æ˜¯è¢«æ‹’ğŸ˜…ï¼ŒåŸå› æ˜¯å®šä½å’Œç›¸å†Œè¯·æ±‚çš„æè¿°ä¸æ­£ç¡®ï¼Œä¿®æ”¹å®Œä¹‹åï¼Œæ‰“åŒ…ï¼Œæäº¤ï¼Œç¬¬äºŒå¤©æ—©æ™¨èµ·æ¥ä¸€çœ‹ï¼Œé€šè¿‡äº†ğŸ˜†ã€‚åˆ°å…¬å¸åæµ‹è¯•çº¿ä¸Šçš„å†…è´­ï¼Œæ‰€æœ‰çš„æµç¨‹éƒ½æ˜¯OKçš„ã€‚
5. å½“å¤©ä¸‹åˆåˆé‡æ–°ä¸Šäº†ä¸€ç‰ˆï¼Œç¬¬äºŒå¤©èµ·æ¥å®¡æ ¸é€šè¿‡äº†ï¼Œä½†æ˜¯é—®é¢˜æ¥äº†åˆæäº¤çš„äº”ä¸ªå†…è´­å•†å“æ— æ³•è´­ä¹°ï¼ŒåŸå› æ˜¯appstoreè¿˜æ²¡ååº”è¿‡æ¥ï¼ˆå•†å“åœ¨**2~24å°æ—¶**æ˜¯ç”Ÿæ•ˆæ—¶é—´ï¼‰ã€‚
6. è¯´ä¸ªé¢˜å¤–è¯ï¼Œåœ¨appè¢«æ‹’åï¼Œå¦‚æœè‡ªå·±çš„appæ²¡é—®é¢˜ï¼Œå°±ç›´æ¥ä¸Šè¯‰è‹¹æœå®¡æŸ¥å§”å‘˜ä¼šï¼Œä¸è¦å†ææ–°åŒ…ï¼Œç­‰ç€ç”³è¯‰çš„å›å¤ã€‚ç”³è¯‰æˆåŠŸåï¼Œè‹¹æœå®¡æ ¸äººå‘˜ä¼šè‡ªå·±æŠŠåº”ç”¨çš„åŒ…é‡æ–°ä»**äºŒè¿›åˆ¶è¢«æ‹’**->**æ­£åœ¨å®¡æ ¸**ï¼Œç­‰å¾…å†æ¬¡è¢«å®¡æ ¸çš„ç»“æœå°±å¥½ã€‚

#### ä¹ã€é’ˆå¯¹ä¸å¤§å®¶äº¤æµçš„ä¸€äº›é—®é¢˜åˆ—ä¸¾å¦‚ä¸‹

1. ä»€ä¹ˆå«ç¬¬ä¸€æ¬¡å†…è´­å®¡æ ¸ï¼Ÿ

> ç®€å•çš„ç†è§£å°±æ˜¯ï¼šåŒç±»å‹çš„å•†å“æ²¡æœ‰è¢«æ‰¹å‡†çš„å°±æ˜¯ç¬¬ä¸€æ¬¡å®¡æ ¸ï¼Œä¸¾ä¸ªä¾‹å­ï¼šæˆ‘ç°åœ¨è¦ä¸Šä¸€ä¸ªè®¢é˜…çš„å•†å“ï¼Œæˆ‘çš„å†…è´­åˆ—è¡¨é‡Œé¢æœ‰4ä¸ªæ¶ˆè´¹å‹çš„å•†å“è¢«æ‰¹å‡†äº†ï¼Œä½†æ˜¯è®¢é˜…çš„å•†å“è¿˜æ²¡æœ‰è¢«æ‰¹å‡†çš„ï¼Œé‚£ä¹ˆä¸Šè®¢é˜…çš„å•†å“å°±æ˜¯ç¬¬ä¸€æ¬¡ï¼Œè¦å’Œipaä¸€èµ·å®¡æ ¸ï¼Œä¸€èµ·æäº¤ï¼Œåœ¨æäº¤ipaæ—¶å€™åœ¨ä¸‹é¢å‹¾é€‰æ·»åŠ å†…è´­å•†å“ï¼ŒæŠŠè®¢é˜…çš„å•†å“é€‰æ‹©ä¸Šå°±å¥½ï¼Œä¸€èµ·å®¡æ ¸

2. ä»€ä¹ˆæ—¶å€™æäº¤å†…è´­å•†å“å¯ä»¥ä¸ä¸ipaä¸€èµ·å®¡æ ¸ï¼Ÿ

> å½“åŒç±»å‹å•†å“æœ‰è¢«æ‰¹å‡†çš„ï¼Œé‚£ä¹ˆå†æ¬¡æäº¤å†…è´­å•†å“å°±ä¸éœ€è¦å†å’Œipaä¸€èµ·æäº¤äº†ï¼Œå•ç‹¬æäº¤å°±å¥½ï¼Œåˆ›å»ºå®Œå†…è´­å•†å“ï¼Œå­˜å‚¨ï¼Œç›´æ¥æäº¤ï¼›ä¸¾ä¾‹ï¼šå†…è´­åˆ—è¡¨é‡Œé¢æœ‰4ä¸ªæ¶ˆè´¹å‹å•†å“å·²ç»è¢«æ‰¹å‡†ï¼Œå†æäº¤ä¸€ä¸ªæ¶ˆè´¹å‹å•†å“ï¼Œå°±å¯ä»¥å•ç‹¬æäº¤äº†

3. å½“ç¬¬ä¸€æ¬¡æäº¤å†…è´­å®¡æ ¸ï¼Œå†…è´­è¢«æ‹’æ€ä¹ˆåŠï¼Ÿ

> æŠŠå†…è´­å•†å“åˆ æ‰ï¼Œåˆ›å»ºæ–°çš„å†…è´­å•†å“ï¼Œå†æ‰“åŒ…ï¼Œæäº¤ipaï¼Œæ·»åŠ æ–°çš„å†…è´­å•†å“ï¼Œå†æ¬¡å®¡æ ¸å°±å¥½ã€‚

